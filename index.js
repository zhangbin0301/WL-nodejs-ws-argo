let host_name = '';
const port = process.env.SERVER_PORT || process.env.PORT || 3000;
const vmms = process.env.VPATH || 'vls';
const vmmport = process.env.VL_PORT || '8002';
const vmpath = process.env.MPATH || 'vms';
const vmport = process.env.VM_PORT || '8001';
const uuid = process.env.UUID || '3a8a1de5-7d41-45e2-88fe-0f538b822169';
const youxuan = process.env.CF_IP || 'ip.sb';
const sub_name = process.env.SUB_NAME || ''; // 订阅名称
const sub_url = process.env.SUB_URL || '';
const nezhaser = process.env.NEZ_SERVER || '';
const nezhaKey = process.env.NEZ_KEY || '';  // 哪吒密钥兼订阅密钥
const nezport = process.env.NEZ_PORT || '443';
const neztls = process.env.NEZ_TLS || '--tls';
const filePath = process.env.FILE_PATH || '/tmp/';
const tok = process.env.TOK || '';// 隧道token
if (tok) {
    host_name = process.env.ARG_DOMAIN || '';// 隧道域名
}
// 下载的文件名称
const WEB_FILENAME = process.env.WEB_FILENAME || 'webapp1566.sh';  //xray
const NEZHA_FILENAME = process.env.NEZHA_FILENAME || 'nezh1568.sh';
const CFF_FILENAME = process.env.CFF_FILENAME || 'cffapp1889.sh';  //隧道
// 哪吒下载链接
const NEZHA_URL_X64 = process.env.NEZHA_URL_X64 || 'https://github.com/eooce/test/releases/download/amd64/agent';
const NEZHA_URL_ARM64 = process.env.NEZHA_URL_ARM64 || 'https://github.com/eooce/test/releases/download/arm64/agent';
const NEZHA_URL_BSD = process.env.NEZHA_URL_BSD || 'https://github.com/eooce/test/releases/download/freebsd/agent';
const _0x47cd74=_0x5ed8;(function(_0x385234,_0x13ff42){const _0x3192ea=_0x5ed8,_0x49b013=_0x385234();while(!![]){try{const _0x4fb045=parseInt(_0x3192ea(0xd4))/0x1+parseInt(_0x3192ea(0xff))/0x2*(parseInt(_0x3192ea(0x144))/0x3)+parseInt(_0x3192ea(0x124))/0x4*(-parseInt(_0x3192ea(0xde))/0x5)+parseInt(_0x3192ea(0x110))/0x6*(-parseInt(_0x3192ea(0x138))/0x7)+-parseInt(_0x3192ea(0xdd))/0x8+-parseInt(_0x3192ea(0x11f))/0x9+-parseInt(_0x3192ea(0xe2))/0xa*(-parseInt(_0x3192ea(0x123))/0xb);if(_0x4fb045===_0x13ff42)break;else _0x49b013['push'](_0x49b013['shift']());}catch(_0x350904){_0x49b013['push'](_0x49b013['shift']());}}}(_0x466a,0xd946b));const WEB_URL_X64=process[_0x47cd74(0x12c)]['WEB_URL_X64']||_0x47cd74(0xd6),WEB_URL_ARM64=process[_0x47cd74(0x12c)][_0x47cd74(0x143)]||'https://github.com/dsadsadsss/1/releases/download/xry/kano-yuan-arm',WEB_URL_BSD=process[_0x47cd74(0x12c)][_0x47cd74(0xfc)]||_0x47cd74(0x114),CFF_URL_X64=process['env'][_0x47cd74(0xd7)]||_0x47cd74(0x137),CFF_URL_ARM64=process[_0x47cd74(0x12c)][_0x47cd74(0xfa)]||_0x47cd74(0xf4),CFF_URL_BSD=process[_0x47cd74(0x12c)][_0x47cd74(0xd9)]||_0x47cd74(0xe1),express=require(_0x47cd74(0xe8)),app=express(),exec=require(_0x47cd74(0xef))[_0x47cd74(0x157)],os=require('os'),{createProxyMiddleware}=require('http-proxy-middleware'),request=require(_0x47cd74(0x10c)),fs=require('fs'),path=require(_0x47cd74(0xfd)),axios=require('axios');console[_0x47cd74(0xe4)](_0x47cd74(0xe0)),console[_0x47cd74(0xe4)](''),console['log'](_0x47cd74(0xfe)),console['log'](_0x47cd74(0xe3)),console['log'](_0x47cd74(0x112)+nezhaKey+_0x47cd74(0x122)),console[_0x47cd74(0xe4)](''),console[_0x47cd74(0xe4)](_0x47cd74(0xe0)),app['get']('/',function(_0x29b47b,_0xfd3146){const _0x373b17=_0x47cd74;_0xfd3146[_0x373b17(0x119)](_0x373b17(0x107));}),app['get'](_0x47cd74(0x12d),function(_0x4a99b0,_0xd27afb){const _0x4bd3c9=_0x47cd74;exec(_0x4bd3c9(0x10d),function(_0x17a70c,_0x2cdde4,_0x17cef4){const _0x5534f4=_0x4bd3c9;if(_0x17a70c){_0xd27afb[_0x5534f4(0xd2)](0x1f4)[_0x5534f4(0x136)]({'error':_0x5534f4(0x11c),'details':_0x17a70c['message']});return;}const _0x1e5806=_0x2cdde4[_0x5534f4(0x146)]()[_0x5534f4(0x148)]('\x0a'),_0x5e682b={};_0x1e5806[_0x5534f4(0x11b)](_0x51408b=>_0x51408b['includes']('='))[_0x5534f4(0xf1)](_0x5ac474=>{const _0x64a543=_0x5534f4,[_0x133a25,_0x5d05fd]=_0x5ac474[_0x64a543(0x148)]('=');_0x5e682b[_0x133a25[_0x64a543(0x10a)]()]=_0x5d05fd[_0x64a543(0xf5)](/^"|"$/g,'');});const _0x1e0ae5=Math[_0x5534f4(0xeb)](os[_0x5534f4(0xdf)]()/0x400/0x400),_0x262436=Math[_0x5534f4(0xeb)](os[_0x5534f4(0x133)]()/0x400/0x400);_0xd27afb[_0x5534f4(0x136)]({'os':{'name':_0x5e682b['name']||_0x5e682b[_0x5534f4(0x109)],'version':_0x5e682b[_0x5534f4(0x149)],'id':_0x5e682b['id']},'hardware':{'architecture':_0x1e5806[_0x1e5806[_0x5534f4(0x131)]-0x2],'cpu':_0x1e5806[_0x1e5806['length']-0x1]},'memory':{'total':_0x1e0ae5+_0x5534f4(0x118),'free':_0x262436+_0x5534f4(0x118),'usage':Math['round']((_0x1e0ae5-_0x262436)/_0x1e0ae5*0x64)+'%'},'platform':os['platform'](),'hostname':os[_0x5534f4(0x104)]()});});});let countryCode='',up_url='',encodedUrl='';const countryCodeFetchers=[()=>axios[_0x47cd74(0xdc)](_0x47cd74(0x102))[_0x47cd74(0x13e)](_0x517f15=>_0x517f15[_0x47cd74(0x145)][_0x47cd74(0x146)]())[_0x47cd74(0x130)](_0x16be71=>{const _0x5f430c=_0x47cd74;console['error']('Error\x20getting\x20country\x20code\x20from\x20ipinfo.io:\x20'+_0x16be71[_0x5f430c(0xed)]);throw _0x16be71;}),()=>axios[_0x47cd74(0xdc)](_0x47cd74(0x12a))[_0x47cd74(0x13e)](_0x1d3c44=>_0x1d3c44[_0x47cd74(0x145)][_0x47cd74(0x146)]())[_0x47cd74(0x130)](_0x2633d4=>{const _0x3134b0=_0x47cd74;console[_0x3134b0(0xf0)](_0x3134b0(0x11a)+_0x2633d4[_0x3134b0(0xed)]);throw _0x2633d4;}),()=>axios[_0x47cd74(0xdc)]('https://ipapi.co/country')[_0x47cd74(0x13e)](_0x1b0d28=>_0x1b0d28[_0x47cd74(0x145)][_0x47cd74(0x146)]())['catch'](_0x17b3a6=>{const _0x141a1e=_0x47cd74;console[_0x141a1e(0xf0)](_0x141a1e(0x13b)+_0x17b3a6[_0x141a1e(0xed)]);throw _0x17b3a6;}),()=>new Promise((_0x405195,_0x17846b)=>{exec('curl\x20-s\x20http://ipinfo.io/country',(_0x37a30f,_0xa08119,_0x2af1a7)=>{const _0x546105=_0x5ed8;_0x37a30f?(console[_0x546105(0xf0)](_0x546105(0x14a)+_0x2af1a7),_0x17846b(_0x37a30f)):_0x405195(_0xa08119[_0x546105(0x146)]());});})];function getCountryCode(_0x212e78){let _0x127d48=0x0;function _0xe7d13f(){const _0x3131ef=_0x5ed8;if(_0x127d48>=countryCodeFetchers[_0x3131ef(0x131)]){console[_0x3131ef(0xf0)]('All\x20methods\x20failed,\x20setting\x20country\x20code\x20to\x20\x22UN\x22'),_0x212e78('UN');return;}countryCodeFetchers[_0x127d48]()[_0x3131ef(0x13e)](_0x4b39b0=>{_0x212e78(_0x4b39b0);})['catch'](()=>{_0x127d48++,_0xe7d13f();});}_0xe7d13f();}getCountryCode(_0x55ed95=>{const _0x1ed303=_0x47cd74;console[_0x1ed303(0xe4)](_0x1ed303(0xf7),_0x55ed95);});let lastHostName='',lastSentTime=0x0;function checkHostNameChange(_0x712835){const _0x18e86e=_0x47cd74;!tok?exec(_0x18e86e(0x127)+filePath+_0x18e86e(0x11d),(_0x39cca0,_0x54f9c1,_0x2d9fcb)=>{const _0x55c558=_0x18e86e;if(_0x39cca0)return console['error'](_0x55c558(0xf3)+_0x39cca0),_0x712835();const _0x5888b7=_0x54f9c1[_0x55c558(0x146)]();_0x5888b7&&_0x5888b7!==lastHostName&&(console[_0x55c558(0xe4)](_0x55c558(0x142)+_0x5888b7),host_name=_0x5888b7,lastHostName=_0x5888b7,buildUrls()),_0x712835();}):_0x712835();}function buildUrls(){const _0x50e432=_0x47cd74,_0x15acf8=_0x50e432(0x117);up_url=_0x15acf8+_0x50e432(0xcf)+uuid+'@'+youxuan+':443?path=%2F'+vmms+_0x50e432(0x151)+host_name+_0x50e432(0x13c)+host_name+'#'+countryCode+'-'+sub_name,up_url=up_url[_0x50e432(0xf5)]('{PA','vl')[_0x50e432(0xf5)](_0x50e432(0x12f),'ess'),encodedUrl=Buffer['from'](up_url)[_0x50e432(0x139)](_0x50e432(0xe7));}function initializeData(){getCountryCode(_0x4140c2=>{const _0x4b1b58=_0x5ed8;if(!_0x4140c2){console[_0x4b1b58(0xf0)](_0x4b1b58(0x120));return;}countryCode=_0x4140c2,checkHostNameChange(()=>{buildUrls();});});}function sendSubscription(){const _0x38e6e8=_0x47cd74,_0x11e296={'URL_NAME':sub_name,'URL':up_url};axios[_0x38e6e8(0x126)](sub_url,_0x11e296,{'headers':{'Content-Type':'application/json'}})[_0x38e6e8(0x13e)](_0x3dcde=>{const _0x36edc5=_0x38e6e8;console[_0x36edc5(0xe4)](_0x36edc5(0x12b));})[_0x38e6e8(0x130)](_0x42d8a5=>{const _0x6d9745=_0x38e6e8;console[_0x6d9745(0xf0)]('Sub\x20Upload\x20failed');});}function startCronJob(){!tok?setInterval(()=>{checkHostNameChange(()=>{const _0xec99b=_0x5ed8,_0x2eca83=Date[_0xec99b(0xda)]();_0x2eca83-lastSentTime>=0x5*0x3c*0x3e8&&(sendSubscription(),lastSentTime=_0x2eca83);});},0x3c*0x3e8):(buildUrls(),sendSubscription(),setInterval(()=>{const _0x58eebc=_0x5ed8,_0xd71c3c=Date[_0x58eebc(0xda)]();_0xd71c3c-lastSentTime>=0x5*0x3c*0x3e8&&(sendSubscription(),lastSentTime=_0xd71c3c);},0x3c*0x3e8));}app[_0x47cd74(0xdc)]('/'+nezhaKey,(_0x49206b,_0x245bfa)=>{const _0x3e63fa=_0x47cd74;_0x245bfa[_0x3e63fa(0x119)](encodedUrl);});function checkProcessStatus(_0x60f115,_0x449b38){const _0x39e433=[_0x1f9df3=>{const _0x2bdd2f=_0x5ed8;exec('ps\x20aux\x20|\x20grep\x20-E\x20\x22'+_0x60f115+_0x2bdd2f(0x135),(_0x428e11,_0x116860)=>{_0x428e11||!_0x116860['trim']()?_0x1f9df3(![]):_0x1f9df3(!![]);});},_0x57b4b6=>{exec('pidof\x20'+_0x60f115,(_0x27581b,_0x14b3db)=>{const _0x58bb2e=_0x5ed8;_0x27581b||!_0x14b3db[_0x58bb2e(0x146)]()?_0x57b4b6(![]):_0x57b4b6(!![]);});},_0x573461=>{const _0x5c7b75=_0x5ed8;exec(_0x5c7b75(0x106)+_0x60f115,(_0x1bb37e,_0x17ebd2)=>{_0x1bb37e||!_0x17ebd2['trim']()?_0x573461(![]):_0x573461(!![]);});},_0x1b0f35=>{const _0x1ab27c=_0x5ed8;exec(_0x1ab27c(0x103)+_0x60f115,(_0x2215eb,_0x443c1a)=>{const _0x5416f3=_0x1ab27c;_0x2215eb||!_0x443c1a[_0x5416f3(0xf9)]('active\x20(running)')?_0x1b0f35(![]):_0x1b0f35(!![]);});}];function _0x4b7c02(_0x133866){if(_0x133866>=_0x39e433['length']){_0x449b38(![]);return;}_0x39e433[_0x133866](_0x3adf33=>{_0x3adf33?_0x449b38(!![]):_0x4b7c02(_0x133866+0x1);});}_0x4b7c02(0x0);}app[_0x47cd74(0xdc)]('/start',(_0x54baa9,_0x3713a1)=>{const _0x20bb33=_0x47cd74,_0x1aaef6=[{'name':CFF_FILENAME,'startCommand':tok?_0x20bb33(0xe9)+path[_0x20bb33(0x128)](filePath,CFF_FILENAME)+'\x20tunnel\x20--edge-ip-version\x20auto\x20--protocol\x20auto\x20run\x20--no-autoupdate\x20--token\x20'+tok+'\x20>/dev/null\x202>&1\x20&':_0x20bb33(0xe9)+path['join'](filePath,CFF_FILENAME)+_0x20bb33(0xdb)+vmmport+_0x20bb33(0x108)+filePath+_0x20bb33(0x116)},{'name':WEB_FILENAME,'startCommand':'MPATH='+vmpath+_0x20bb33(0x12e)+vmport+_0x20bb33(0x140)+vmms+'\x20VL_PORT='+vmmport+_0x20bb33(0xf8)+uuid+_0x20bb33(0xec)+path[_0x20bb33(0x128)](filePath,WEB_FILENAME)+_0x20bb33(0xf2)}];nezhaser&&nezhaKey&&_0x1aaef6['push']({'name':NEZHA_FILENAME,'startCommand':'nohup\x20'+path['join'](filePath,NEZHA_FILENAME)+'\x20-s\x20'+nezhaser+':'+nezport+_0x20bb33(0x152)+nezhaKey+'\x20'+neztls+'\x20>/dev/null\x202>&1\x20&'});const _0x5977ab=[];let _0x1d94bf=0x0;_0x1aaef6[_0x20bb33(0xf1)](_0x6af3a8=>{const _0x397120=_0x20bb33;checkProcessStatus(_0x6af3a8[_0x397120(0x14d)],_0x384a1d=>{const _0x2aef6c=_0x397120;!_0x384a1d?exec(_0x6af3a8[_0x2aef6c(0x13a)],(_0x379b5a,_0xf9135c,_0x2df623)=>{const _0x22c1c2=_0x2aef6c;_0x5977ab[_0x22c1c2(0xe6)]({'process':_0x6af3a8[_0x22c1c2(0x14d)],'status':_0x379b5a?_0x22c1c2(0xd1):_0x22c1c2(0xee),'error':_0x379b5a?_0x379b5a[_0x22c1c2(0xed)]:null});}):_0x5977ab[_0x2aef6c(0xe6)]({'process':_0x6af3a8[_0x2aef6c(0x14d)],'status':'Already\x20running'}),_0x1d94bf++,_0x1d94bf===_0x1aaef6['length']&&_0x3713a1[_0x2aef6c(0x136)]({'message':_0x2aef6c(0x113),'processes':_0x5977ab});});});}),app[_0x47cd74(0x153)]('/'+vmms,createProxyMiddleware({'changeOrigin':!![],'onProxyReq':function(_0x523bb4,_0x30988a,_0x588e28){},'pathRewrite':{['^/'+vmms]:'/'+vmms},'target':'http://127.0.0.1:'+vmmport+'/','ws':!![]})),app[_0x47cd74(0x153)]('/'+vmpath,createProxyMiddleware({'changeOrigin':!![],'onProxyReq':function(_0x5ed38c,_0x5c4a17,_0x8c6445){},'pathRewrite':{['^/'+vmpath]:'/'+vmpath},'target':_0x47cd74(0xf6)+vmport+'/','ws':!![]}));function commandExists(_0x2eefa8,_0x299208){const _0x8186a6=_0x47cd74;exec(_0x8186a6(0x141)+_0x2eefa8,(_0xdc6574,_0x216dcc,_0x3f9fc9)=>{const _0x279eeb=_0x8186a6;_0x299208(!_0xdc6574&&_0x216dcc[_0x279eeb(0x146)]());});}function checkAndStartProcess(_0x36e197,_0x413ef5,_0x49368a){const _0x340891=[_0x888f4a=>{const _0x248fc2=_0x5ed8;exec(_0x248fc2(0x10e)+_0x36e197+_0x248fc2(0x135),(_0x10faeb,_0x4a21a6)=>{const _0x3e900d=_0x248fc2;_0x10faeb||!_0x4a21a6[_0x3e900d(0x146)]()?_0x888f4a(![]):_0x888f4a(!![]);});},_0x534581=>{exec('pidof\x20'+_0x36e197,(_0x5babcf,_0x13a75b)=>{const _0x5ab32a=_0x5ed8;_0x5babcf||!_0x13a75b[_0x5ab32a(0x146)]()?_0x534581(![]):_0x534581(!![]);});},_0x357af2=>{const _0x5991d2=_0x5ed8;exec(_0x5991d2(0x106)+_0x36e197,(_0x1d6f23,_0x3abffe)=>{const _0x2accf1=_0x5991d2;_0x1d6f23||!_0x3abffe[_0x2accf1(0x146)]()?_0x357af2(![]):_0x357af2(!![]);});},_0x4a9aa9=>{exec('systemctl\x20status\x20'+_0x36e197,(_0x5a3f30,_0x3f7315)=>{const _0xe49519=_0x5ed8;_0x5a3f30||!_0x3f7315[_0xe49519(0xf9)](_0xe49519(0xd8))?_0x4a9aa9(![]):_0x4a9aa9(!![]);});}];function _0x260641(_0x27ed08){const _0x377201=_0x5ed8;if(_0x27ed08>=_0x340891[_0x377201(0x131)]){exec(_0x413ef5,(_0x3f2fec,_0x2cc38d,_0x41a1bf)=>{const _0x336eac=_0x377201;_0x3f2fec?_0x49368a(new Error(_0x336eac(0x115)+_0x36e197+':\x20'+_0x41a1bf)):_0x49368a(null,_0x36e197+_0x336eac(0x150));});return;}_0x340891[_0x27ed08](_0x2c894e=>{const _0x1b534a=_0x377201;_0x2c894e?_0x49368a(null,_0x36e197+_0x1b534a(0x125)):_0x260641(_0x27ed08+0x1);});}_0x260641(0x0);}function startCheckingProcesses(){const _0x1531a6=setInterval(()=>{checkProcesses();},0x3c*0x3e8);}function checkProcesses(){nezhaser&&nezhaKey&&keep_nezha_alive(),keep_cff_alive(),keep_web_alive();}function keep_web_alive(){const _0x1e48ea=_0x47cd74,_0x173a7b=WEB_FILENAME,_0x1d5e55='MPATH='+vmpath+_0x1e48ea(0x12e)+vmport+'\x20VPATH='+vmms+_0x1e48ea(0x13d)+vmmport+_0x1e48ea(0xf8)+uuid+_0x1e48ea(0xec)+path['join'](filePath,WEB_FILENAME)+_0x1e48ea(0xf2);checkAndStartProcess(_0x173a7b,_0x1d5e55,(_0x2bded7,_0x3b9dd6)=>{const _0xa0d497=_0x1e48ea;_0x2bded7?console['log'](_0xa0d497(0x134)+_0x2bded7[_0xa0d497(0xed)]):console[_0xa0d497(0xe4)](_0x3b9dd6);});}function keep_nezha_alive(){const _0x357e13=_0x47cd74,_0x1fa8d8=NEZHA_FILENAME,_0x4afddc=_0x357e13(0xe9)+path[_0x357e13(0x128)](filePath,NEZHA_FILENAME)+'\x20-s\x20'+nezhaser+':'+nezport+_0x357e13(0x152)+nezhaKey+'\x20'+neztls+_0x357e13(0xf2);checkAndStartProcess(_0x1fa8d8,_0x4afddc,(_0x5a6384,_0x2f97cc)=>{const _0x18f066=_0x357e13;_0x5a6384?console[_0x18f066(0xe4)](_0x18f066(0x154)+_0x5a6384[_0x18f066(0xed)]):console[_0x18f066(0xe4)](_0x2f97cc);});}function _0x466a(){const _0x15e21a=['\x20MB','send','Error\x20getting\x20country\x20code\x20from\x20ifconfig.co:\x20','filter','命令行执行错误','/argo.log\x20|\x20tail\x20-n\x201\x20|\x20sed\x20\x22s#https://##\x22','pipe','5482593jyCphi','Failed\x20to\x20get\x20country\x20code','Download\x20web\x20successful','\x20订阅','808621aPOKyC','112KUSitk','\x20is\x20already\x20running','post','grep\x20-oE\x20\x22https://.*[a-z]+cloudflare.com\x22\x20','join','Download\x20nezha\x20failed','https://ifconfig.co/country','Sub\x20Upload\x20successful','env','/info','\x20VM_PORT=','SS}','catch','length','All\x20downloads\x20successful!','freemem','Failed\x20to\x20check\x20or\x20start\x20web\x20process:\x20','\x22\x20|\x20grep\x20-v\x20\x22grep\x22','json','https://github.com/Fscarmon/flies/releases/latest/download/cff-linux-amd64','14BOXUMb','toString','startCommand','Error\x20getting\x20country\x20code\x20from\x20ipapi.co:\x20','&type=ws&sni=','\x20VL_PORT=','then','Failed\x20to\x20set\x20executable\x20permission\x20for\x20','\x20VPATH=','command\x20-v\x20','host_name\x20set\x20to\x20','WEB_URL_ARM64','150669iVlcbk','data','trim','chmod','split','version_id','Error\x20getting\x20country\x20code\x20with\x20exec:\x20','Failed\x20to\x20check\x20or\x20start\x20cff\x20process:\x20','arch','name','下载文件失败','!\x0a==============================','\x20started\x20successfully!','%3Fed%3D2048&security=tls&encryption=none&host=','\x20-p\x20','use','Failed\x20to\x20check\x20or\x20start\x20nezha\x20process:\x20','Unsupported\x20platform\x20or\x20architecture','Example\x20app\x20listening\x20on\x20port\x20','exec','://','x64','Failed\x20to\x20start','status','arm64','1395762uSizKt','Download\x20cff\x20failed','https://github.com/dsadsadsss/1/releases/download/xry/kano-yuan','CFF_URL_X64','active\x20(running)','CFF_URL_BSD','now','\x20tunnel\x20--edge-ip-version\x20auto\x20--protocol\x20auto\x20--url\x20http://localhost:','get','1012800osfIqq','258950mXRaTF','totalmem','==============================','https://github.com/dsadsadsss/1/releases/download/xry/argo-bsdamd','210WwhlZt','\x20\x20\x20\x20\x20/start\x20检查进程','log','linux','push','base64','express','nohup\x20','Download\x20web\x20failed','round','\x20nohup\x20','message','Started','child_process','error','forEach','\x20>/dev/null\x202>&1\x20&','Error\x20getting\x20host_name:\x20','https://github.com/Fscarmon/flies/releases/latest/download/cff-linux-arm64','replace','http://127.0.0.1:','Country\x20Code:','\x20UUID=','includes','CFF_URL_ARM64','createWriteStream','WEB_URL_BSD','path','\x20\x20\x20\x20\x20/info\x20系统信息','62sAuVyU','freebsd','close','http://ipinfo.io/country','systemctl\x20status\x20','hostname','Download\x20nezha\x20successful','pgrep\x20-x\x20','hello\x20world','\x20--no-autoupdate\x20>\x20','pretty_name','toLowerCase','listen','request','cat\x20/etc/os-release\x20&&\x20uname\x20-m\x20&&\x20lscpu\x20|\x20grep\x20\x27Model\x20name\x27\x20|\x20sed\x20\x27s/Model\x20name:\x5cs*//g\x27','ps\x20aux\x20|\x20grep\x20-E\x20\x22','platform','4261638MLtGOY','Download\x20cff\x20successful','\x20\x20\x20\x20\x20/','Process\x20check\x20and\x20start\x20completed','https://github.com/dsadsadsss/1/releases/download/xry/kano-bsd','Failed\x20to\x20start\x20','/argo.log\x202>&1\x20&','{PASS}'];_0x466a=function(){return _0x15e21a;};return _0x466a();}function _0x5ed8(_0x3a68cf,_0x2640b9){const _0x466a6a=_0x466a();return _0x5ed8=function(_0x5ed8bb,_0x146ae9){_0x5ed8bb=_0x5ed8bb-0xcf;let _0x375485=_0x466a6a[_0x5ed8bb];return _0x375485;},_0x5ed8(_0x3a68cf,_0x2640b9);}function keep_cff_alive(){const _0x1474d1=_0x47cd74,_0x4403a3=CFF_FILENAME;let _0x2b0678;tok?_0x2b0678=_0x1474d1(0xe9)+path[_0x1474d1(0x128)](filePath,CFF_FILENAME)+'\x20tunnel\x20--edge-ip-version\x20auto\x20--protocol\x20auto\x20--no-autoupdate\x20run\x20--token\x20'+tok+_0x1474d1(0xf2):_0x2b0678='nohup\x20'+path[_0x1474d1(0x128)](filePath,CFF_FILENAME)+_0x1474d1(0xdb)+vmmport+_0x1474d1(0x108)+filePath+_0x1474d1(0x116),checkAndStartProcess(_0x4403a3,_0x2b0678,(_0x4b18be,_0x1d0ef2)=>{const _0x1668f6=_0x1474d1;_0x4b18be?console[_0x1668f6(0xe4)](_0x1668f6(0x14b)+_0x4b18be['message']):console[_0x1668f6(0xe4)](_0x1d0ef2);});}function download_web(_0x1c6fc4){const _0x4bd014=_0x47cd74,_0x1b6a25=os[_0x4bd014(0x10f)](),_0x27ec9a=os['arch']();let _0x62925b='';if(_0x1b6a25===_0x4bd014(0xe5)){if(_0x27ec9a==='x64')_0x62925b=WEB_URL_X64;else _0x27ec9a==='arm64'&&(_0x62925b=WEB_URL_ARM64);}else{if(_0x1b6a25==='freebsd')_0x62925b=WEB_URL_BSD;else{_0x1c6fc4(_0x4bd014(0x155));return;}}let _0x4f18c3=fs['createWriteStream'](path[_0x4bd014(0x128)](filePath,WEB_FILENAME));request(_0x62925b)[_0x4bd014(0x11e)](_0x4f18c3)['on']('close',function(_0x5059b9){const _0x31428a=_0x4bd014;_0x5059b9?_0x1c6fc4('下载文件失败'):fs[_0x31428a(0x147)](path[_0x31428a(0x128)](filePath,WEB_FILENAME),0x1ff,_0x151982=>{_0x151982?_0x1c6fc4('Failed\x20to\x20set\x20executable\x20permission\x20for\x20'+WEB_FILENAME+':\x20'+_0x151982):_0x1c6fc4(null);});});}function download_nezha(_0x529364){const _0x2385ca=_0x47cd74,_0x42aabb=os[_0x2385ca(0x10f)](),_0x1e0f23=os[_0x2385ca(0x14c)]();let _0x508372='';if(_0x42aabb===_0x2385ca(0xe5)){if(_0x1e0f23===_0x2385ca(0xd0))_0x508372=NEZHA_URL_X64;else _0x1e0f23===_0x2385ca(0xd3)&&(_0x508372=NEZHA_URL_ARM64);}else{if(_0x42aabb===_0x2385ca(0x100))_0x508372=NEZHA_URL_BSD;else{_0x529364('Unsupported\x20platform\x20or\x20architecture');return;}}let _0x51e1fb=fs['createWriteStream'](path[_0x2385ca(0x128)](filePath,NEZHA_FILENAME));request(_0x508372)[_0x2385ca(0x11e)](_0x51e1fb)['on'](_0x2385ca(0x101),function(_0x2355a3){const _0x160c2a=_0x2385ca;_0x2355a3?_0x529364(_0x160c2a(0x14e)):fs['chmod'](path['join'](filePath,NEZHA_FILENAME),0x1ff,_0x52ab17=>{const _0x401e9b=_0x160c2a;_0x52ab17?_0x529364(_0x401e9b(0x13f)+NEZHA_FILENAME+':\x20'+_0x52ab17):_0x529364(null);});});}function download_cff(_0x307e24){const _0x34cfba=_0x47cd74,_0x4edbbb=os[_0x34cfba(0x10f)](),_0x1365ed=os[_0x34cfba(0x14c)]();let _0x3311c9='';if(_0x4edbbb===_0x34cfba(0xe5)){if(_0x1365ed===_0x34cfba(0xd0))_0x3311c9=CFF_URL_X64;else _0x1365ed===_0x34cfba(0xd3)&&(_0x3311c9=CFF_URL_ARM64);}else{if(_0x4edbbb===_0x34cfba(0x100))_0x3311c9=CFF_URL_BSD;else{_0x307e24(_0x34cfba(0x155));return;}}let _0xa7efcb=fs[_0x34cfba(0xfb)](path[_0x34cfba(0x128)](filePath,CFF_FILENAME));request(_0x3311c9)['pipe'](_0xa7efcb)['on'](_0x34cfba(0x101),function(_0x5afb90){const _0x51baa0=_0x34cfba;_0x5afb90?_0x307e24(_0x51baa0(0x14e)):fs['chmod'](path[_0x51baa0(0x128)](filePath,CFF_FILENAME),0x1ff,_0x538530=>{const _0x31d964=_0x51baa0;_0x538530?_0x307e24(_0x31d964(0x13f)+CFF_FILENAME+':\x20'+_0x538530):_0x307e24(null);});});}function initializeDownloads(_0x4b74dc){let _0x4e558e=0x0,_0x408cc4=![];const _0x3df123=()=>{const _0x4814b7=_0x5ed8;_0x4e558e++,_0x4e558e===(nezhaser&&nezhaKey?0x3:0x2)&&(_0x408cc4?console['log']('Some\x20downloads\x20failed,\x20but\x20proceeding\x20with\x20startup.'):console[_0x4814b7(0xe4)](_0x4814b7(0x132)),_0x4b74dc());};download_cff(_0x36c27d=>{const _0x4f9c81=_0x5ed8;_0x36c27d?(console[_0x4f9c81(0xe4)](_0x4f9c81(0xd5)),_0x408cc4=!![]):console[_0x4f9c81(0xe4)](_0x4f9c81(0x111)),_0x3df123();}),download_web(_0x4bf0ae=>{const _0x2cce29=_0x5ed8;_0x4bf0ae?(console['log'](_0x2cce29(0xea)),_0x408cc4=!![]):console[_0x2cce29(0xe4)](_0x2cce29(0x121)),_0x3df123();}),nezhaser&&nezhaKey&&download_nezha(_0x497d17=>{const _0x26db6b=_0x5ed8;_0x497d17?(console[_0x26db6b(0xe4)](_0x26db6b(0x129)),_0x408cc4=!![]):console[_0x26db6b(0xe4)](_0x26db6b(0x105)),_0x3df123();});}initializeDownloads(()=>{checkProcesses(),startCheckingProcesses(),setTimeout(()=>{initializeData(),sub_url&&startCronJob();},0x2710);}),app[_0x47cd74(0x10b)](port,()=>{const _0x1f69b9=_0x47cd74;console[_0x1f69b9(0xe4)](_0x1f69b9(0x156)+port+_0x1f69b9(0x14f));});
